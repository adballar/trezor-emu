#!/usr/bin/python
import os
import sys
import time
import display
import display_buffer
import smallfonts
import pygame
import logo

import buttons

import layout
        
width=128
height=64

class Tx(object):
    def __init__(self, address, amount):
        self.address = address
        self.amount = amount
        
buffer = display_buffer.DisplayBuffer(width, height)
display = display.Display(buffer, spi=False, virtual=True)
but = buttons.Buttons(hw=False, stdin=True, pygame=False)
layout = layout.Layout(buffer)

display.init()
layout.show_logo(logo.logo)
#layout.show_transactions([Tx('1BRMLAB7nryYgFGrG8x9SYaokb8r2ZwAsX', 1.1), Tx('1Marek48fwU7mugmSe186do2QpUkBnpzSN', 2)], True)

while True:
    b = but.read()
    if b != None:
        print "Button", b
        
    buffer.scrollup(50)
    display.refresh()
    layout.update()
    #time.sleep(0.01)

'''
while True:
    b = bitkey.buttonsRead()
    if b[0]:
        bitkey.oledInvert(82, 54, 126, 62)
        bitkey.oledRefresh()
    if b[1]:
        bitkey.oledInvert(1, 54, 45, 62)
        bitkey.oledRefresh()
    print 'yes:', b[1], 'no:', b[0]
    time.sleep(0.1)
'''
